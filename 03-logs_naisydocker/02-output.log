# running pretrained models

(python3.6.9) jetson@docker-donkeycar-donkeynano462:~/data/mycar$ python manage.py drive --model=models/pilot_21-08-12_4.h5 --type=linear
________             ______                   _________              
___  __ \_______________  /___________  __    __  ____/_____ ________
__  / / /  __ \_  __ \_  //_/  _ \_  / / /    _  /    _  __ `/_  ___/
_  /_/ // /_/ /  / / /  ,<  /  __/  /_/ /     / /___  / /_/ /_  /    
/_____/ \____//_/ /_//_/|_| \___/_\__, /      \____/  \__,_/ /_/     
                                 /____/                              

using donkey v4.3.22 ...
WARNING:donkeycar.parts.pins:pigpio was not imported.
INFO:donkeycar.config:loading config file: /home/jetson/data/mycar/config.py
INFO:donkeycar.config:loading personal config over-rides from myconfig.py
INFO:__main__:PID: 1554
cfg.CAMERA_TYPE WEBCAM
INFO:__main__:cfg.CAMERA_TYPE WEBCAM
pygame 2.1.2 (SDL 2.0.16, Python 3.6.9)
Hello from the pygame community. https://www.pygame.org/contribute.html
INFO:donkeycar.parts.camera:Opening Webcam...
INFO:donkeycar.parts.camera:Available cameras ['/dev/video0', '/dev/video1']
INFO:donkeycar.parts.camera:Webcam opened at /dev/video1 ...
INFO:donkeycar.parts.camera:...warming camera
INFO:donkeycar.parts.camera:...warming camera
INFO:donkeycar.parts.camera:...warming camera
INFO:donkeycar.parts.camera:Webcam ready.
INFO:donkeycar.vehicle:Adding part Webcam.
Starting Donkey Server...... you can now go to donkeynano462.local:8887 to drive your car.
INFO:donkeycar.vehicle:Adding part LocalWebController.
INFO:donkeycar.vehicle:Adding part ExplodeDict.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part ThrottleFilter.
INFO:donkeycar.vehicle:Adding part PilotCondition.
INFO:donkeycar.vehicle:Adding part RecordTracker.
INFO:donkeycar.utils:get_model_by_type: model type is: linear
2022-10-15 12:27:32.075945: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:32.636423: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:32.636904: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:32.639090: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:32.639492: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:32.639796: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:37.098011: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:37.098593: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:37.099079: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:27:37.113028: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1525] Created device /job:localhost/replica:0/task:0/device:GPU:0 with 155 MB memory:  -> device: 0, name: NVIDIA Tegra X1, pci bus id: 0000:00:00.0, compute capability: 5.3
INFO:donkeycar.parts.keras:Created KerasLinear with interpreter: KerasInterpreter
loading model models/pilot_21-08-12_4.h5
INFO:donkeycar.parts.keras:Loading model models/pilot_21-08-12_4.h5
INFO:donkeycar.parts.interpreter:Loading model models/pilot_21-08-12_4.h5
finished loading in 0.5554659366607666 sec.
INFO:donkeycar.vehicle:Adding part FileWatcher.
INFO:donkeycar.vehicle:Adding part FileWatcher.
INFO:donkeycar.vehicle:Adding part DelayedTrigger.
INFO:donkeycar.vehicle:Adding part TriggeredCallback.
INFO:donkeycar.vehicle:Adding part KerasLinear.
INFO:donkeycar.vehicle:Adding part DriveMode.
INFO:donkeycar.vehicle:Adding part AiLaunch.
INFO:donkeycar.vehicle:Adding part AiRunCondition.
INFO:donkeycar.parts.actuator:PWM Steering created
INFO:donkeycar.parts.actuator:Init ESC
INFO:donkeycar.parts.actuator:PWM Throttle created
INFO:donkeycar.vehicle:Adding part PWMSteering.
INFO:donkeycar.vehicle:Adding part PWMThrottle.
Created a new datastore at /home/jetson/data/mycar/data/tub_10_22-10-15
INFO:donkeycar.vehicle:Adding part TubWriter.
You can now go to <your hostname.local>:8887 to drive your car.
INFO:donkeycar.vehicle:Starting vehicle at 20 Hz
INFO:tornado.access:304 GET /drive (127.0.0.1) 104.03ms
INFO:tornado.access:101 GET /wsDrive (127.0.0.1) 5.30ms
New client connected
2022-10-15 12:28:03.051451: I tensorflow/stream_executor/cuda/cuda_dnn.cc:377] Loaded cuDNN version 8201
2022-10-15 12:28:42.954350: W tensorflow/stream_executor/gpu/asm_compiler.cc:111] *** WARNING *** You are using ptxas 10.2.300, which is older than 11.1. ptxas before 11.1 is known to miscompile XLA code, leading to incorrect results or invalid-address errors.

You may not need to update to CUDA 11.1; cherry-picking the ptxas binary is often sufficient.
^CINFO:donkeycar.vehicle:Shutting down vehicle and its parts...
INFO:donkeycar.parts.camera:stopping Webcam
INFO:donkeycar.vehicle:Part Profile Summary: (times in ms)
INFO:donkeycar.vehicle:
+--------------------+---------+-------+-------+-------+-------+--------+--------+
|        part        |   max   |  min  |  avg  |  50%  |  90%  |  99%   | 99.9%  |
+--------------------+---------+-------+-------+-------+-------+--------+--------+
|       Webcam       |   0.39  |  0.01 |  0.02 |  0.02 |  0.03 |  0.06  |  0.13  |
| LocalWebController |   1.27  |  0.04 |  0.07 |  0.07 |  0.08 |  0.15  |  0.34  |
|    ExplodeDict     |   0.57  |  0.01 |  0.02 |  0.02 |  0.02 |  0.04  |  0.17  |
|   ThrottleFilter   |   0.36  |  0.01 |  0.02 |  0.02 |  0.02 |  0.04  |  0.14  |
|   PilotCondition   |   0.20  |  0.01 |  0.01 |  0.01 |  0.02 |  0.03  |  0.14  |
|   RecordTracker    |   0.12  |  0.01 |  0.01 |  0.01 |  0.02 |  0.02  |  0.10  |
|    FileWatcher     |  69.13  |  0.04 |  0.37 |  0.16 |  0.45 |  2.86  |  6.17  |
|    FileWatcher     |   8.28  |  0.02 |  0.17 |  0.04 |  0.22 |  2.44  |  6.01  |
|   DelayedTrigger   |   3.65  |  0.01 |  0.02 |  0.01 |  0.02 |  0.03  |  0.12  |
| TriggeredCallback  |   0.13  |  0.01 |  0.01 |  0.01 |  0.01 |  0.01  |  0.09  |
|    KerasLinear     | 1005.17 | 28.94 | 55.25 | 51.46 | 68.89 | 101.58 | 132.79 |
|     DriveMode      |   1.35  |  0.02 |  0.09 |  0.10 |  0.12 |  0.18  |  0.30  |
|      AiLaunch      |   0.60  |  0.01 |  0.02 |  0.02 |  0.03 |  0.07  |  0.14  |
|   AiRunCondition   |   0.19  |  0.01 |  0.01 |  0.01 |  0.02 |  0.03  |  0.10  |
|    PWMSteering     |   0.41  |  0.03 |  0.10 |  0.10 |  0.12 |  0.19  |  0.29  |
|    PWMThrottle     |   0.57  |  0.02 |  0.04 |  0.04 |  0.04 |  0.10  |  0.16  |
+--------------------+---------+-------+-------+-------+-------+--------+--------+



(python3.6.9) jetson@docker-donkeycar-donkeynano462:~/data/mycar$ python manage.py drive --model=models/pilot_21-08-12_9.h5 --type=memory
________             ______                   _________              
___  __ \_______________  /___________  __    __  ____/_____ ________
__  / / /  __ \_  __ \_  //_/  _ \_  / / /    _  /    _  __ `/_  ___/
_  /_/ // /_/ /  / / /  ,<  /  __/  /_/ /     / /___  / /_/ /_  /    
/_____/ \____//_/ /_//_/|_| \___/_\__, /      \____/  \__,_/ /_/     
                                 /____/                              

using donkey v4.3.22 ...
WARNING:donkeycar.parts.pins:pigpio was not imported.
INFO:donkeycar.config:loading config file: /home/jetson/data/mycar/config.py
INFO:donkeycar.config:loading personal config over-rides from myconfig.py
INFO:__main__:PID: 1600
cfg.CAMERA_TYPE WEBCAM
INFO:__main__:cfg.CAMERA_TYPE WEBCAM
pygame 2.1.2 (SDL 2.0.16, Python 3.6.9)
Hello from the pygame community. https://www.pygame.org/contribute.html
INFO:donkeycar.parts.camera:Opening Webcam...
INFO:donkeycar.parts.camera:Available cameras ['/dev/video0', '/dev/video1']
INFO:donkeycar.parts.camera:Webcam opened at /dev/video1 ...
INFO:donkeycar.parts.camera:...warming camera
INFO:donkeycar.parts.camera:...warming camera
INFO:donkeycar.parts.camera:...warming camera
INFO:donkeycar.parts.camera:Webcam ready.
INFO:donkeycar.vehicle:Adding part Webcam.
Starting Donkey Server...... you can now go to donkeynano462.local:8887 to drive your car.
INFO:donkeycar.vehicle:Adding part LocalWebController.
INFO:donkeycar.vehicle:Adding part ExplodeDict.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part Lambda.
INFO:donkeycar.vehicle:Adding part ThrottleFilter.
INFO:donkeycar.vehicle:Adding part PilotCondition.
INFO:donkeycar.vehicle:Adding part RecordTracker.
INFO:donkeycar.utils:get_model_by_type: model type is: memory
INFO:donkeycar.parts.keras:Creating memory model with length 3, depth 0
2022-10-15 12:32:15.686201: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:16.057523: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:16.058005: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:16.060140: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:16.060826: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:16.061341: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:21.482280: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:21.482755: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:21.483245: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1019] ARM64 does not support NUMA - returning NUMA node zero
2022-10-15 12:32:21.495573: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1525] Created device /job:localhost/replica:0/task:0/device:GPU:0 with 72 MB memory:  -> device: 0, name: NVIDIA Tegra X1, pci bus id: 0000:00:00.0, compute capability: 5.3
INFO:donkeycar.parts.keras:Created KerasMemory-L:3-D:0 with interpreter: KerasInterpreter
loading model models/pilot_21-08-12_9.h5
INFO:donkeycar.parts.keras:Loading model models/pilot_21-08-12_9.h5
INFO:donkeycar.parts.interpreter:Loading model models/pilot_21-08-12_9.h5
INFO:donkeycar.parts.keras:Loaded memory model with mem length 3
finished loading in 0.5829768180847168 sec.
INFO:donkeycar.vehicle:Adding part FileWatcher.
INFO:donkeycar.vehicle:Adding part FileWatcher.
INFO:donkeycar.vehicle:Adding part DelayedTrigger.
INFO:donkeycar.vehicle:Adding part TriggeredCallback.
INFO:donkeycar.vehicle:Adding part KerasMemory.
INFO:donkeycar.vehicle:Adding part DriveMode.
INFO:donkeycar.vehicle:Adding part AiLaunch.
INFO:donkeycar.vehicle:Adding part AiRunCondition.
INFO:donkeycar.parts.actuator:PWM Steering created
INFO:donkeycar.parts.actuator:Init ESC
INFO:donkeycar.parts.actuator:PWM Throttle created
INFO:donkeycar.vehicle:Adding part PWMSteering.
INFO:donkeycar.vehicle:Adding part PWMThrottle.
Created a new datastore at /home/jetson/data/mycar/data/tub_11_22-10-15
INFO:donkeycar.vehicle:Adding part TubWriter.
You can now go to <your hostname.local>:8887 to drive your car.
INFO:donkeycar.vehicle:Starting vehicle at 20 Hz
INFO:tornado.access:304 GET /drive (127.0.0.1) 72.01ms
INFO:tornado.access:101 GET /wsDrive (127.0.0.1) 2.99ms
New client connected
2022-10-15 12:32:32.841716: I tensorflow/stream_executor/cuda/cuda_dnn.cc:377] Loaded cuDNN version 8201
2022-10-15 12:32:54.104089: W tensorflow/stream_executor/gpu/asm_compiler.cc:111] *** WARNING *** You are using ptxas 10.2.300, which is older than 11.1. ptxas before 11.1 is known to miscompile XLA code, leading to incorrect results or invalid-address errors.

You may not need to update to CUDA 11.1; cherry-picking the ptxas binary is often sufficient.
INFO:tornado.access:304 GET /drive (127.0.0.1) 1061.41ms
INFO:tornado.access:101 GET /wsDrive (127.0.0.1) 11.25ms
New client connected
^CINFO:donkeycar.vehicle:Shutting down vehicle and its parts...
INFO:donkeycar.parts.camera:stopping Webcam
INFO:donkeycar.vehicle:Part Profile Summary: (times in ms)
INFO:donkeycar.vehicle:
+--------------------+---------+-------+--------+--------+--------+--------+--------+
|        part        |   max   |  min  |  avg   |  50%   |  90%   |  99%   | 99.9%  |
+--------------------+---------+-------+--------+--------+--------+--------+--------+
|       Webcam       |   0.13  |  0.01 |  0.02  |  0.02  |  0.03  |  0.07  |  0.12  |
| LocalWebController |   3.54  |  0.04 |  0.08  |  0.07  |  0.09  |  0.17  |  0.62  |
|    ExplodeDict     |   0.48  |  0.01 |  0.02  |  0.02  |  0.02  |  0.05  |  0.16  |
|   ThrottleFilter   |   0.21  |  0.01 |  0.02  |  0.02  |  0.02  |  0.05  |  0.13  |
|   PilotCondition   |   0.10  |  0.01 |  0.01  |  0.01  |  0.02  |  0.02  |  0.07  |
|   RecordTracker    |   0.08  |  0.01 |  0.01  |  0.01  |  0.01  |  0.02  |  0.08  |
|    FileWatcher     |  96.68  |  0.05 |  0.84  |  0.21  |  2.41  |  5.08  |  9.20  |
|    FileWatcher     |   6.98  |  0.03 |  0.36  |  0.08  |  1.85  |  4.08  |  5.83  |
|   DelayedTrigger   |   0.12  |  0.01 |  0.02  |  0.02  |  0.02  |  0.04  |  0.11  |
| TriggeredCallback  |   0.09  |  0.01 |  0.01  |  0.01  |  0.01  |  0.02  |  0.08  |
|    KerasMemory     | 1506.61 | 88.66 | 116.52 | 111.11 | 132.72 | 183.99 | 343.22 |
|     DriveMode      |   7.40  |  0.02 |  0.11  |  0.10  |  0.13  |  0.24  |  1.20  |
|      AiLaunch      |   0.16  |  0.02 |  0.03  |  0.02  |  0.03  |  0.07  |  0.14  |
|   AiRunCondition   |   0.07  |  0.01 |  0.01  |  0.01  |  0.02  |  0.02  |  0.06  |
|    PWMSteering     |   0.28  |  0.03 |  0.11  |  0.10  |  0.13  |  0.21  |  0.28  |
|    PWMThrottle     |   0.41  |  0.02 |  0.04  |  0.04  |  0.05  |  0.12  |  0.24  |
+--------------------+---------+-------+--------+--------+--------+--------+--------+

